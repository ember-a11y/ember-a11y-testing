{"version":3,"file":"configure-options.js","sources":["../../src/test-support/configure-options.ts"],"sourcesContent":["import { getContext } from '@ember/test-helpers';\nimport { registerDestructor } from '@ember/destroyable';\n\nimport type { Spec } from 'axe-core';\n\nlet configureOptions: Spec | undefined;\n\n/**\n * Sets axe-core configuration options (passed to `axe.configure()`).\n *\n * Unlike `setRunOptions` (which controls *what* axe checks), `setConfigureOptions`\n * controls *how* axe is set up â€” custom rules, checks, branding, locale, etc.\n *\n * See: https://github.com/dequelabs/axe-core/blob/develop/doc/API.md#api-name-axeconfigure\n *\n * @param spec Axe {Spec} to be passed to `axe.configure()` before each audit.\n */\nexport function setConfigureOptions(spec?: Spec) {\n  configureOptions = spec;\n\n  const context = getContext();\n\n  if (context) {\n    registerDestructor((context as { owner: object }).owner, () => {\n      configureOptions = undefined;\n    });\n  }\n}\n\n/**\n * Gets the current axe-core configuration options.\n */\nexport function getConfigureOptions(): Spec | undefined {\n  return configureOptions;\n}\n"],"names":["configureOptions","setConfigureOptions","spec","context","getContext","registerDestructor","owner","undefined","getConfigureOptions"],"mappings":";;;AAKA,IAAIA,gBAAkC;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,mBAAmBA,CAACC,IAAW,EAAE;AAC/CF,EAAAA,gBAAgB,GAAGE,IAAI;AAEvB,EAAA,MAAMC,OAAO,GAAGC,UAAU,EAAE;AAE5B,EAAA,IAAID,OAAO,EAAE;AACXE,IAAAA,kBAAkB,CAAEF,OAAO,CAAuBG,KAAK,EAAE,MAAM;AAC7DN,MAAAA,gBAAgB,GAAGO,SAAS;AAC9B,IAAA,CAAC,CAAC;AACJ,EAAA;AACF;;AAEA;AACA;AACA;AACO,SAASC,mBAAmBA,GAAqB;AACtD,EAAA,OAAOR,gBAAgB;AACzB;;;;"}