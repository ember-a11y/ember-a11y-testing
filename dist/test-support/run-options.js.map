{"version":3,"file":"run-options.js","sources":["../../src/test-support/run-options.ts"],"sourcesContent":["import { getContext } from '@ember/test-helpers';\nimport { registerDestructor } from '@ember/destroyable';\n\nimport type { RunOptions } from 'axe-core';\n\nconst optionsStack: RunOptions[] = [];\n\n/**\n * Sets run options specific to a test.\n *\n * @param options Axe {RunOptions} to be provided to the audit helper.\n */\nexport function setRunOptions(options: RunOptions = {}) {\n  optionsStack.push(options);\n\n  const context = getContext();\n\n  if (context) {\n    registerDestructor((context as { owner: object }).owner, () =>\n      optionsStack.pop(),\n    );\n  }\n}\n\n/**\n * Gets run options specific to a test.\n *\n * @param context Test context object, accessed using `@ember/test-helpers` `getContext` function.\n */\nexport function getRunOptions() {\n  return optionsStack[optionsStack.length - 1];\n}\n"],"names":["optionsStack","setRunOptions","options","push","context","getContext","registerDestructor","owner","pop","getRunOptions","length"],"mappings":";;;AAKA,MAAMA,YAA0B,GAAG,EAAE;;AAErC;AACA;AACA;AACA;AACA;AACO,SAASC,aAAaA,CAACC,OAAmB,GAAG,EAAE,EAAE;AACtDF,EAAAA,YAAY,CAACG,IAAI,CAACD,OAAO,CAAC;AAE1B,EAAA,MAAME,OAAO,GAAGC,UAAU,EAAE;AAE5B,EAAA,IAAID,OAAO,EAAE;IACXE,kBAAkB,CAAEF,OAAO,CAAuBG,KAAK,EAAE,MACvDP,YAAY,CAACQ,GAAG,EAClB,CAAC;AACH,EAAA;AACF;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASC,aAAaA,GAAG;AAC9B,EAAA,OAAOT,YAAY,CAACA,YAAY,CAACU,MAAM,GAAG,CAAC,CAAC;AAC9C;;;;"}